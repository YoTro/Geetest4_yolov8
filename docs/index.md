# 项目文档

欢迎来到新版 Geetest 自动化项目的文档中心。该项目经过了全面重构，旨在提供一个结构清晰、功能健壮、易于扩展的极验文字点选验证码处理方案。

## 项目简介

本项目是一个结合了深度学习与自动化流程的工具，用于处理极验（Geetest）v4 的文字点选验证码。它使用 **YOLOv8** 模型进行目标检测，并可选地集成 **TrOCR** 模型进行文字识别。项目内置了自动和手动处理模式，以及模式间的自动切换逻辑。

与旧版相比，新版具有以下特点：
- **代码现代化**：全面采用函数式和模块化设计，移除了冗余的类和复杂的管理模块。
- **配置统一化**：所有配置项都集中在 `config/settings.py` 中，通过 `dataclass` 进行结构化管理。
- **流程自动化**：提供了从数据收集、数据集准备、模型训练到最终验证的完整命令行工具链。

## 主要功能

- **验证码处理 (`run`)**:
  - **自动模式 (`auto`)**: 使用 YOLOv8 模型和配置的 OCR 引擎全自动识别并提交点选坐标。
  - **手动模式 (`manual`)**: 启动图形化（GUI）界面，由人工辅助完成点选。
  - **内置切换逻辑**: 当自动模式连续失败时，会自动降级到手动模式。

- **数据收集 (`collect`)**:
  - 支持**代理池**或**延迟降频**两种模式，安全、高效地收集大量训练样本。
  - 支持多线程并发下载。

- **模型生命周期管理**:
  - **数据集准备 (`prepare`)**: 一键将原始数据转换为标准的 YOLO 格式数据集。
  - **YOLO模型训练 (`train`)**: 调用 `ultralytics` 库训练 YOLOv8 模型。
  - **TrOCR模型训练 (`train_trocr`)**: 微调 TrOCR 模型，用于识别裁剪下来的文字图像。
  - **PaddleOCR模型训练 (`train_paddle`)**: 微调 PaddleOCR 模型，用于识别裁剪下来的文字图像。
  - **模型评估 (`evaluate`)**: 在验证集上评估模型性能。
  - **模型导出 (`export`)**: 将训练好的 `.pt` 模型导出为 ONNX 等格式。

- **半自动标注与文字识别**:
  - **文字区域提取 (`extract_text_regions`)**: 使用训练好的YOLO模型自动从图片中裁剪出文字区域，为 OCR 模型准备训练数据。
  - **文本识别 (`recognize`)**: 使用配置的 OCR 引擎（TrOCR 或 PaddleOCR）识别图像中的文字。

## 文档导航

- **[1. 安装指南](./installation.md)**: 如何搭建项目的运行环境。
- **[2. 使用说明](./usage.md)**: 如何通过命令行与项目交互。
- **[3. 配置详解](./configuration.md)**: 了解项目中的各项配置。
- **[4. 项目结构](./structure.md)**: 深入了解代码的组织方式。
- **[5. 逆向分析](./geetest_v4_analysis.md)**: Geetest V4 文字点选验证码逆向分析。